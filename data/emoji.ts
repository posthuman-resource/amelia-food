import rawData from "emojibase-data/en/data.json";
import cldrShortcodes from "emojibase-data/en/shortcodes/cldr.json";
import messages from "emojibase-data/en/messages.json";

// ---------------------------------------------------------------------------
// Types
// ---------------------------------------------------------------------------

export interface EmojiEntry {
  emoji: string;
  name: string;
  keywords: string[];
  group: string;
}

// ---------------------------------------------------------------------------
// Custom associations â€” enrich search beyond official CLDR tags
// ---------------------------------------------------------------------------

const CUSTOM_ASSOCIATIONS: Record<string, string[]> = {
  // -------------------------------------------------------------------------
  // Emotions & moods
  // -------------------------------------------------------------------------
  love: [
    "â¤ï¸",
    "ğŸ’•",
    "ğŸ’—",
    "ğŸ’“",
    "ğŸ’–",
    "ğŸ’˜",
    "ğŸ’",
    "ğŸ’",
    "ğŸ¥°",
    "ğŸ˜",
    "ğŸ˜˜",
    "ğŸ’‘",
    "ğŸ’",
    "ğŸ«¶",
    "ğŸ’",
    "ğŸŒ¹",
    "ğŸ«‚",
    "â¤ï¸â€ğŸ”¥",
    "ğŸ’Ÿ",
    "â™¥ï¸",
  ],
  romantic: [
    "ğŸ’˜",
    "ğŸ’Œ",
    "ğŸŒ¹",
    "ğŸ’•",
    "ğŸ’‘",
    "ğŸ’",
    "ğŸ¥‚",
    "ğŸ·",
    "ğŸ•¯ï¸",
    "ğŸ’",
    "ğŸ˜˜",
    "ğŸ¥°",
    "â¤ï¸â€ğŸ”¥",
    "ğŸ’’",
    "ğŸ«¶",
  ],
  sad: [
    "ğŸ˜¢",
    "ğŸ˜­",
    "ğŸ˜",
    "ğŸ˜”",
    "ğŸ’”",
    "ğŸ¥€",
    "ğŸŒ§ï¸",
    "ğŸ˜¿",
    "ğŸ¥º",
    "ğŸ˜©",
    "ğŸ˜¥",
    "ğŸ« ",
    "ğŸ˜®â€ğŸ’¨",
    "ğŸ«¥",
  ],
  happy: [
    "ğŸ˜Š",
    "ğŸ˜„",
    "ğŸ˜",
    "ğŸ¥³",
    "ğŸ‰",
    "ğŸŒˆ",
    "â˜€ï¸",
    "ğŸ’›",
    "ğŸ˜º",
    "âœ¨",
    "ğŸ¤—",
    "ğŸ«¶",
    "ğŸ˜ƒ",
    "ğŸ˜†",
    "ğŸ¤­",
    "ğŸ˜Œ",
  ],
  excited: [
    "ğŸ¤©",
    "ğŸ¥³",
    "ğŸ‰",
    "ğŸŠ",
    "âœ¨",
    "âš¡",
    "ğŸ”¥",
    "ğŸ’¥",
    "ğŸ™Œ",
    "ğŸ«¨",
    "ğŸ˜†",
    "ğŸ¤¸",
    "ğŸ¥",
  ],
  confused: ["ğŸ˜•", "ğŸ¤”", "ğŸ˜µâ€ğŸ’«", "â“", "ğŸ«¤", "ğŸ¤·", "ğŸ˜¶â€ğŸŒ«ï¸", "ğŸ« ", "ğŸ˜"],
  cozy: [
    "â˜•",
    "ğŸ«–",
    "ğŸ§£",
    "ğŸ§¶",
    "ğŸ•¯ï¸",
    "ğŸ”¥",
    "ğŸ›‹ï¸",
    "ğŸ«•",
    "ğŸ§¸",
    "ğŸ«§",
    "ğŸ¥§",
    "ğŸµ",
    "ğŸ§¦",
    "ğŸª´",
    "ğŸ“–",
    "ğŸ›Œ",
    "ğŸŒ™",
    "ğŸª",
  ],
  angry: ["ğŸ˜ ", "ğŸ˜¡", "ğŸ¤¬", "ğŸ’¢", "ğŸ‘¿", "ğŸ˜¤", "ğŸ”¥", "âš¡"],
  scared: ["ğŸ˜¨", "ğŸ˜±", "ğŸ˜°", "ğŸ«£", "ğŸ‘»", "ğŸ’€", "ğŸ™€", "ğŸ˜§"],
  tired: ["ğŸ˜´", "ğŸ¥±", "ğŸ˜ª", "ğŸ’¤", "ğŸ›Œ", "ğŸ˜®â€ğŸ’¨", "ğŸ« "],
  peaceful: [
    "ğŸ˜Œ",
    "ğŸ§˜",
    "ğŸ•Šï¸",
    "ğŸŒ¿",
    "ğŸƒ",
    "ğŸŒ¸",
    "â˜ï¸",
    "ğŸ«§",
    "ğŸª·",
    "ğŸŒŠ",
    "ğŸ",
    "ğŸµ",
  ],
  silly: [
    "ğŸ¤ª",
    "ğŸ˜œ",
    "ğŸ˜",
    "ğŸ¤¡",
    "ğŸ‘»",
    "ğŸ™ƒ",
    "ğŸ˜¹",
    "ğŸ« ",
    "ğŸ¤“",
    "ğŸ¥¸",
    "ğŸ˜‹",
    "ğŸ«£",
  ],
  grateful: ["ğŸ™", "ğŸ¥¹", "ğŸ’›", "ğŸ¤—", "ğŸ«¶", "âœ¨", "ğŸ’•", "ğŸ˜Š", "ğŸŒ»"],
  proud: ["ğŸ¥¹", "ğŸ’ª", "ğŸ†", "ğŸ‘", "ğŸ–ï¸", "ğŸ«¡", "âœŠ", "ğŸ˜¤", "ğŸŒŸ"],
  lonely: ["ğŸ¥º", "ğŸ˜”", "ğŸŒ§ï¸", "ğŸ’­", "ğŸ«¥", "ğŸª", "ğŸŒŒ", "ğŸ˜¿", "ğŸš¶"],
  nostalgic: [
    "ğŸ“·",
    "ğŸï¸",
    "ğŸ’­",
    "ğŸ¥¹",
    "ğŸ‚",
    "ğŸ“»",
    "ğŸ•°ï¸",
    "ğŸ“œ",
    "ğŸ¶",
    "ğŸŒ…",
    "ğŸ“¸",
    "ğŸª´",
  ],
  hopeful: ["ğŸŒ±", "ğŸŒ…", "âœ¨", "ğŸ•Šï¸", "ğŸŒˆ", "ğŸ™", "ğŸ’«", "ğŸŒ¤ï¸", "ğŸ¤", "ğŸ«¶"],
  shy: ["ğŸ«£", "ğŸ˜³", "ğŸ™ˆ", "â˜ºï¸", "ğŸ‘‰ğŸ‘ˆ", "ğŸ˜¶", "ğŸ« ", "ğŸŒ¸"],
  surprised: ["ğŸ˜²", "ğŸ˜®", "ğŸ¤¯", "ğŸ˜±", "ğŸ«¢", "ğŸ˜¯", "â‰ï¸", "â€¼ï¸", "ğŸ‘€", "ğŸ«¨"],
  anxious: ["ğŸ˜°", "ğŸ˜Ÿ", "ğŸ«£", "ğŸ˜¬", "ğŸ’­", "ğŸ˜®â€ğŸ’¨", "ğŸ¤", "ğŸ« ", "ğŸ˜µâ€ğŸ’«"],
  calm: ["ğŸ˜Œ", "ğŸ§˜", "ğŸµ", "ğŸŒ¿", "ğŸ•Šï¸", "ğŸ«§", "â˜ï¸", "ğŸª·", "ğŸ", "ğŸ’†"],
  playful: ["ğŸ˜œ", "ğŸ¤ª", "ğŸ˜¸", "ğŸª", "ğŸ ", "ğŸˆ", "ğŸ§¸", "ğŸ¾", "ğŸ¤¸", "ğŸ˜‹"],
  mischievous: ["ğŸ˜", "ğŸ˜ˆ", "ğŸ˜¼", "ğŸ¤­", "ğŸ«¢", "ğŸ™Š", "ğŸ¦Š", "ğŸ‘€"],
  overwhelmed: ["ğŸ˜µâ€ğŸ’«", "ğŸ¤¯", "ğŸ˜©", "ğŸ« ", "ğŸ˜­", "ğŸ’«", "ğŸŒŠ", "ğŸ«¨"],
  content: ["ğŸ˜Š", "ğŸ˜Œ", "â˜ºï¸", "ğŸ«¶", "ğŸ¤—", "ğŸ’›", "ğŸŒ¸", "âœ¨", "ğŸµ"],
  jealous: ["ğŸ˜’", "ğŸ™„", "ğŸ˜¤", "ğŸ’š", "ğŸ˜¾", "ğŸ«¤"],
  bored: ["ğŸ˜", "ğŸ˜‘", "ğŸ¥±", "ğŸ˜’", "ğŸ«¤", "ğŸ’¤", "ğŸ™„"],
  awkward: ["ğŸ˜¬", "ğŸ˜…", "ğŸ« ", "ğŸ™ƒ", "ğŸ˜¶", "ğŸ«£", "ğŸ¤­"],
  determined: ["ğŸ’ª", "ğŸ˜¤", "âœŠ", "ğŸ”¥", "ğŸ«¡", "ğŸ¯", "ğŸƒ", "âš¡"],
  tender: ["ğŸ¥¹", "ğŸ«¶", "ğŸ¤²", "ğŸ’—", "ğŸŒ¸", "ğŸ«‚", "ğŸ•Šï¸", "ğŸŒ¿"],

  // -------------------------------------------------------------------------
  // Relationships & people
  // -------------------------------------------------------------------------
  friendship: ["ğŸ¤", "ğŸ‘¯", "ğŸ’›", "ğŸ«‚", "âœŒï¸", "ğŸ‘«", "ğŸ’•", "ğŸ¤—", "ğŸ«¶"],
  family: ["ğŸ‘ª", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", "ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦", "ğŸ‘©â€ğŸ‘§", "ğŸ‘¨â€ğŸ‘§", "ğŸ ", "ğŸ’•", "ğŸ«¶", "ğŸ‘¶", "ğŸ§‘â€ğŸ¼"],
  baby: ["ğŸ‘¶", "ğŸ¼", "ğŸ§’", "ğŸ§¸", "ğŸ£", "ğŸ¤±", "ğŸ§‘â€ğŸ¼", "ğŸ’"],
  hug: ["ğŸ«‚", "ğŸ¤—", "ğŸ«¶", "ğŸ’•", "ğŸ§¸", "ğŸ¤²"],
  kiss: ["ğŸ˜˜", "ğŸ’‹", "ğŸ˜½", "ğŸ’", "ğŸ˜š", "ğŸ˜™"],
  goodbye: ["ğŸ‘‹", "ğŸ«¡", "ğŸ’Œ", "ğŸ•Šï¸", "ğŸ˜¢", "âœˆï¸", "ğŸŒ…"],
  hello: ["ğŸ‘‹", "ğŸ¤—", "ğŸ˜Š", "âœŒï¸", "ğŸ«¡", "ğŸ™‹"],
  sorry: ["ğŸ¥º", "ğŸ˜", "ğŸ™", "ğŸ’”", "ğŸ˜¿", "ğŸ˜¢", "ğŸ’"],
  thanks: ["ğŸ™", "ğŸ’›", "ğŸ¤—", "ğŸ˜Š", "ğŸ«¶", "âœ¨", "ğŸ’•", "ğŸŒ»"],

  // -------------------------------------------------------------------------
  // Amelia-specific interests
  // -------------------------------------------------------------------------
  ballet: ["ğŸ©°", "ğŸ’ƒ", "ğŸ¤¸", "ğŸ­", "ğŸ¶", "ğŸ¦¢", "ğŸ€", "âœ¨"],
  knitting: ["ğŸ§¶", "ğŸ§µ", "ğŸª¡", "ğŸ§£", "ğŸ§¤", "ğŸ§¦", "ğŸ‘", "ğŸª¢"],
  coffee: ["â˜•", "ğŸ«–", "ğŸµ", "ğŸ¤", "ğŸ¥", "ğŸŒ…"],
  chocolate: ["ğŸ«", "ğŸ©", "ğŸª", "ğŸ‚", "ğŸ°", "ğŸ¤", "ğŸ§", "ğŸ«•"],
  cat: [
    "ğŸ±",
    "ğŸˆ",
    "ğŸˆâ€â¬›",
    "ğŸ˜º",
    "ğŸ˜¸",
    "ğŸ˜¹",
    "ğŸ˜»",
    "ğŸ˜¼",
    "ğŸ˜½",
    "ğŸ™€",
    "ğŸ˜¿",
    "ğŸ˜¾",
    "ğŸ¾",
    "ğŸ§¶",
    "ğŸª¶",
  ],
  book: [
    "ğŸ“–",
    "ğŸ“š",
    "ğŸ“•",
    "ğŸ“—",
    "ğŸ“˜",
    "ğŸ“™",
    "ğŸ““",
    "ğŸ“”",
    "ğŸ”–",
    "ğŸ“‘",
    "ğŸ“",
    "âœï¸",
    "ğŸ¤“",
    "ğŸ“œ",
  ],
  yarn: ["ğŸ§¶", "ğŸ§µ", "ğŸª¡", "ğŸ‘", "ğŸª¢"],
  cooking: ["ğŸ³", "ğŸ‘©â€ğŸ³", "ğŸ¥˜", "ğŸ«•", "ğŸ²", "ğŸ”ª", "ğŸ§‘â€ğŸ³", "ğŸ¥„", "ğŸ«™"],
  music: [
    "ğŸµ",
    "ğŸ¶",
    "ğŸ¤",
    "ğŸ¸",
    "ğŸ¹",
    "ğŸ¼",
    "ğŸ§",
    "ğŸ»",
    "ğŸª—",
    "ğŸ¥",
    "ğŸª˜",
    "ğŸ·",
    "ğŸº",
    "ğŸª•",
  ],
  dance: ["ğŸ’ƒ", "ğŸ•º", "ğŸ©°", "ğŸ¤¸", "ğŸ¶", "ğŸª©", "ğŸµ", "ğŸ­"],
  sewing: ["ğŸ§µ", "ğŸª¡", "ğŸ§¶", "âœ‚ï¸", "ğŸª¢", "ğŸ€", "ğŸ§£"],
  art: ["ğŸ¨", "ğŸ–Œï¸", "ğŸ–¼ï¸", "âœï¸", "ğŸ“", "ğŸ­", "ğŸ«§", "âœ¨", "ğŸº"],
  writing: ["âœï¸", "ğŸ“", "ğŸ“–", "ğŸ–Šï¸", "ğŸ“œ", "ğŸ’­", "ğŸ““", "ğŸª¶"],
  photography: ["ğŸ“·", "ğŸ“¸", "ğŸ–¼ï¸", "ğŸï¸", "ğŸŒ…", "ğŸï¸", "ğŸ“±"],

  // -------------------------------------------------------------------------
  // Animals
  // -------------------------------------------------------------------------
  dog: ["ğŸ¶", "ğŸ•", "ğŸ¦®", "ğŸ•â€ğŸ¦º", "ğŸ©", "ğŸ¾", "ğŸ¦´", "ğŸƒ"],
  bird: [
    "ğŸ¦",
    "ğŸ¤",
    "ğŸ§",
    "ğŸ¦œ",
    "ğŸ¦…",
    "ğŸ•Šï¸",
    "ğŸ¦‰",
    "ğŸ¦©",
    "ğŸ“",
    "ğŸ¦†",
    "ğŸ¦¢",
    "ğŸª¶",
  ],
  bunny: ["ğŸ°", "ğŸ‡", "ğŸ¥•", "ğŸŒ¸", "ğŸ¾"],
  rabbit: ["ğŸ°", "ğŸ‡", "ğŸ¥•", "ğŸŒ¸", "ğŸ¾"],
  bear: ["ğŸ»", "ğŸ§¸", "ğŸ»â€â„ï¸", "ğŸ¯", "ğŸ¾"],
  butterfly: ["ğŸ¦‹", "ğŸŒ¸", "ğŸŒº", "ğŸŒ·", "ğŸŒ»", "âœ¨", "ğŸŒˆ"],
  fish: ["ğŸŸ", "ğŸ ", "ğŸ¡", "ğŸ¦ˆ", "ğŸ£", "ğŸŒŠ", "ğŸ¬"],
  horse: ["ğŸ´", "ğŸ", "ğŸ‡", "ğŸ¦„", "ğŸ "],
  fox: ["ğŸ¦Š", "ğŸ‚", "ğŸ", "ğŸŒ²"],
  owl: ["ğŸ¦‰", "ğŸŒ™", "ğŸ“š", "ğŸŒŒ", "ğŸŒ²"],
  bee: ["ğŸ", "ğŸ¯", "ğŸŒ»", "ğŸŒ¸", "ğŸŒ¼", "ğŸ’›"],
  frog: ["ğŸ¸", "ğŸŒ¿", "ğŸ’š", "ğŸƒ", "â˜”"],
  penguin: ["ğŸ§", "â„ï¸", "ğŸ”ï¸", "ğŸ¾", "ğŸ–¤"],
  panda: ["ğŸ¼", "ğŸ‹", "ğŸŒ¿", "ğŸ–¤", "ğŸ¤"],
  dinosaur: ["ğŸ¦•", "ğŸ¦–", "ğŸŒ‹", "ğŸ¦´", "ğŸŒ¿"],
  unicorn: ["ğŸ¦„", "âœ¨", "ğŸŒˆ", "ğŸ’œ", "â­", "ğŸª„"],

  // -------------------------------------------------------------------------
  // Food & drink
  // -------------------------------------------------------------------------
  tea: ["ğŸµ", "ğŸ«–", "â˜•", "ğŸ§", "ğŸƒ", "ğŸŒ¿"],
  wine: ["ğŸ·", "ğŸ¥‚", "ğŸ¾", "ğŸ‡", "ğŸ•¯ï¸"],
  baking: ["ğŸ§", "ğŸ‚", "ğŸ°", "ğŸª", "ğŸ¥§", "ğŸ¥", "ğŸ", "ğŸ‘©â€ğŸ³"],
  fruit: [
    "ğŸ",
    "ğŸŠ",
    "ğŸ‹",
    "ğŸ‡",
    "ğŸ“",
    "ğŸ«",
    "ğŸ‘",
    "ğŸ’",
    "ğŸ¥",
    "ğŸŒ",
    "ğŸˆ",
    "ğŸ",
    "ğŸ¥­",
    "ğŸ",
  ],
  breakfast: ["ğŸ³", "ğŸ¥", "ğŸ¥", "ğŸ§‡", "â˜•", "ğŸ¥£", "ğŸ", "ğŸ¥š", "ğŸ¥“", "ğŸŒ…"],
  dinner: ["ğŸ½ï¸", "ğŸ", "ğŸ¥˜", "ğŸ²", "ğŸ¥©", "ğŸ·", "ğŸ•¯ï¸", "ğŸ«•"],
  dessert: [
    "ğŸ°",
    "ğŸ‚",
    "ğŸ§",
    "ğŸ©",
    "ğŸ«",
    "ğŸª",
    "ğŸ¥§",
    "ğŸ¨",
    "ğŸ¦",
    "ğŸ¬",
    "ğŸ­",
    "ğŸ®",
  ],
  pizza: ["ğŸ•", "ğŸ§€", "ğŸ«’", "ğŸ…", "ğŸ¤Œ"],
  sushi: ["ğŸ£", "ğŸ±", "ğŸ¥¢", "ğŸ™", "ğŸ˜", "ğŸ¥"],
  pasta: ["ğŸ", "ğŸ…", "ğŸ§€", "ğŸ«’", "ğŸ¤Œ", "ğŸ‡®ğŸ‡¹"],
  icecream: ["ğŸ¦", "ğŸ¨", "ğŸ§", "ğŸ§", "ğŸ¤¤", "â˜€ï¸"],
  cake: ["ğŸ‚", "ğŸ°", "ğŸ§", "ğŸ‰", "ğŸ•¯ï¸", "ğŸ«", "ğŸ“"],
  bread: ["ğŸ", "ğŸ¥", "ğŸ¥–", "ğŸ«“", "ğŸ¥¯", "ğŸ§ˆ"],
  soup: ["ğŸ²", "ğŸ¥£", "ğŸ«•", "ğŸ¥˜", "ğŸŒ¶ï¸", "ğŸœ"],
  snack: ["ğŸª", "ğŸ¿", "ğŸ¥¨", "ğŸ§€", "ğŸ«", "ğŸ¬", "ğŸ­", "ğŸ¥œ"],
  spicy: ["ğŸŒ¶ï¸", "ğŸ”¥", "ğŸ«•", "ğŸ¥˜", "ğŸ›", "ğŸŒ®", "ğŸ˜…"],
  healthy: ["ğŸ¥—", "ğŸ¥‘", "ğŸ¥¦", "ğŸ", "ğŸ¥•", "ğŸ¥’", "ğŸŒ½", "ğŸ«", "ğŸ’ª"],
  drinks: ["ğŸ¥¤", "ğŸ§ƒ", "ğŸ§‹", "ğŸ¹", "ğŸ¸", "ğŸ¥›", "ğŸº", "ğŸ»"],

  // -------------------------------------------------------------------------
  // Nature, weather & seasons
  // -------------------------------------------------------------------------
  nature: [
    "ğŸŒ¿",
    "ğŸƒ",
    "ğŸŒ»",
    "ğŸŒº",
    "ğŸŒ¸",
    "ğŸŒ·",
    "ğŸŒ±",
    "ğŸŒ³",
    "ğŸ‚",
    "ğŸ",
    "ğŸŒ¾",
    "ğŸŒµ",
    "ğŸª¨",
    "ğŸªµ",
    "ğŸ„",
  ],
  ocean: [
    "ğŸŒŠ",
    "ğŸš",
    "ğŸ ",
    "ğŸŸ",
    "ğŸ¬",
    "ğŸ‹",
    "ğŸ¦ˆ",
    "ğŸª¸",
    "ğŸ–ï¸",
    "â›µ",
    "ğŸ¦‘",
    "ğŸ™",
    "ğŸª¼",
    "ğŸ¢",
  ],
  stars: ["â­", "ğŸŒŸ", "âœ¨", "ğŸ’«", "ğŸŒ ", "ğŸŒŒ", "ğŸ”­", "â˜€ï¸"],
  rain: ["ğŸŒ§ï¸", "â˜”", "ğŸŒ¦ï¸", "ğŸ’§", "ğŸŒˆ", "ğŸ¸", "ğŸƒ"],
  winter: ["â„ï¸", "â›„", "ğŸŒ¨ï¸", "ğŸ§£", "ğŸ§¤", "â˜ƒï¸", "ğŸ”ï¸", "ğŸ¿", "ğŸ§Š", "ğŸ«–"],
  spring: ["ğŸŒ¸", "ğŸŒ·", "ğŸŒ±", "ğŸ£", "ğŸ¦‹", "ğŸŒ¼", "ğŸª»", "ğŸ", "â˜”", "ğŸŒˆ"],
  summer: [
    "â˜€ï¸",
    "ğŸ–ï¸",
    "ğŸŒ»",
    "ğŸ‰",
    "ğŸŒ´",
    "ğŸ„",
    "ğŸ§",
    "ğŸ•¶ï¸",
    "ğŸ¦",
    "ğŸš",
    "ğŸ‘™",
    "ğŸŒº",
  ],
  autumn: ["ğŸ‚", "ğŸ", "ğŸƒ", "ğŸŒ°", "ğŸ", "ğŸ§£", "ğŸ«–", "ğŸ•¯ï¸", "ğŸŒ¾", "ğŸ„", "ğŸ¦Š"],
  sunset: ["ğŸŒ…", "ğŸŒ‡", "ğŸŒ†", "ğŸŒ„", "ğŸ§¡", "â˜ï¸", "ğŸŒŠ"],
  storm: ["â›ˆï¸", "ğŸŒ©ï¸", "âš¡", "ğŸŒªï¸", "ğŸŒ§ï¸", "ğŸ’¨"],
  wind: ["ğŸ’¨", "ğŸƒ", "ğŸŒ¬ï¸", "ğŸ", "ğŸª", "ğŸŒŠ"],
  rainbow: ["ğŸŒˆ", "âœ¨", "ğŸ¦„", "ğŸŒ¦ï¸", "ğŸ’œ", "ğŸ’›", "ğŸ’š", "â¤ï¸", "ğŸ§¡", "ğŸ’™"],
  snow: ["â„ï¸", "â›„", "ğŸŒ¨ï¸", "â˜ƒï¸", "ğŸ”ï¸", "ğŸ§Š", "ğŸ¤"],
  flower: [
    "ğŸŒ¸",
    "ğŸŒ¹",
    "ğŸŒ»",
    "ğŸŒº",
    "ğŸŒ·",
    "ğŸŒ¼",
    "ğŸ’",
    "ğŸª»",
    "ğŸª·",
    "ğŸŒ¿",
    "ğŸ¥€",
    "ğŸµï¸",
    "ğŸ’®",
  ],
  forest: ["ğŸŒ²", "ğŸŒ³", "ğŸŒ¿", "ğŸƒ", "ğŸ„", "ğŸ¦Œ", "ğŸ¦Š", "ğŸŒ²", "ğŸªµ", "ğŸ•ï¸"],
  mountain: ["ğŸ”ï¸", "â›°ï¸", "ğŸ—»", "ğŸŒ„", "ğŸ•ï¸", "ğŸ¥¾", "ğŸŒ²", "ğŸ¦…"],
  beach: ["ğŸ–ï¸", "ğŸš", "ğŸŒŠ", "â˜€ï¸", "ğŸ„", "ğŸŒ´", "ğŸ‘™", "ğŸ ", "â›±ï¸"],
  moon: [
    "ğŸŒ™",
    "ğŸŒ•",
    "ğŸŒ–",
    "ğŸŒ—",
    "ğŸŒ˜",
    "ğŸŒ‘",
    "ğŸŒ’",
    "ğŸŒ“",
    "ğŸŒ”",
    "ğŸŒ",
    "ğŸŒš",
    "ğŸŒ›",
    "ğŸŒœ",
  ],
  sky: ["â˜ï¸", "ğŸŒ¤ï¸", "â›…", "ğŸŒ¥ï¸", "ğŸŒ¦ï¸", "ğŸŒˆ", "âœ¨", "ğŸŒ…", "ğŸŒŒ"],
  plant: ["ğŸŒ±", "ğŸª´", "ğŸŒ¿", "ğŸƒ", "ğŸŒµ", "ğŸ‹", "ğŸ", "ğŸŒ¾", "â˜˜ï¸", "ğŸ€"],

  // -------------------------------------------------------------------------
  // Places & activities
  // -------------------------------------------------------------------------
  home: ["ğŸ ", "ğŸ¡", "ğŸ›‹ï¸", "ğŸª´", "ğŸ•¯ï¸", "ğŸ§¸", "ğŸ”‘", "ğŸªŸ", "ğŸ›ï¸"],
  travel: [
    "âœˆï¸",
    "ğŸ§³",
    "ğŸ—ºï¸",
    "ğŸŒ",
    "ğŸï¸",
    "ğŸ—¼",
    "ğŸ°",
    "ğŸš‚",
    "ğŸš—",
    "â›µ",
    "ğŸ’",
    "ğŸ“¸",
  ],
  adventure: ["ğŸ•ï¸", "ğŸ¥¾", "ğŸ§—", "ğŸ”ï¸", "ğŸ—ºï¸", "ğŸ§­", "ğŸŒ„", "â›µ", "ğŸ„", "ğŸŒŠ"],
  camping: ["ğŸ•ï¸", "â›º", "ğŸ”¥", "ğŸŒ²", "ğŸŒŒ", "ğŸï¸", "ğŸ¥¾", "ğŸªµ"],
  hiking: ["ğŸ¥¾", "ğŸ”ï¸", "ğŸŒ²", "ğŸï¸", "ğŸ§­", "ğŸŒ„", "ğŸŒ¿", "ğŸ¦Œ"],
  swimming: ["ğŸŠ", "ğŸŒŠ", "ğŸ–ï¸", "ğŸ¤¿", "ğŸ’§", "ğŸ "],
  yoga: ["ğŸ§˜", "ğŸª·", "ğŸŒ¿", "ğŸ˜Œ", "âœ¨", "ğŸƒ", "ğŸ’†"],
  exercise: ["ğŸ’ª", "ğŸƒ", "ğŸ‹ï¸", "ğŸ¤¸", "ğŸš´", "ğŸ§˜", "ğŸŠ", "âš¡"],
  sports: ["âš½", "ğŸ€", "ğŸˆ", "âš¾", "ğŸ¾", "ğŸ", "ğŸ“", "â›³", "ğŸ†", "ğŸ¥‡"],
  gaming: ["ğŸ®", "ğŸ•¹ï¸", "ğŸ‘¾", "ğŸ²", "ğŸƒ", "â™Ÿï¸", "ğŸ†"],
  movies: ["ğŸ¬", "ğŸ¿", "ğŸ¥", "ğŸ“½ï¸", "ğŸï¸", "ğŸ­", "ğŸ“º"],
  shopping: ["ğŸ›ï¸", "ğŸ‘—", "ğŸ‘ ", "ğŸ’„", "ğŸ", "ğŸ’³", "ğŸ¬"],
  garden: [
    "ğŸŒ»",
    "ğŸŒ·",
    "ğŸŒº",
    "ğŸª´",
    "ğŸŒ±",
    "ğŸ¦‹",
    "ğŸ",
    "ğŸ›",
    "ğŸŒ¿",
    "ğŸª»",
    "ğŸŒ¼",
    "ğŸŒ",
    "ğŸª²",
  ],
  space: ["ğŸš€", "ğŸŒŒ", "ğŸª", "â­", "ğŸŒŸ", "ğŸ›¸", "ğŸŒ ", "ğŸ”­", "ğŸ‘©â€ğŸš€", "â˜„ï¸"],
  city: ["ğŸ™ï¸", "ğŸŒƒ", "ğŸŒ†", "ğŸ¢", "ğŸš‡", "ğŸš•", "ğŸŒ‰", "ğŸ—¼"],

  // -------------------------------------------------------------------------
  // Celebrations & occasions
  // -------------------------------------------------------------------------
  celebration: [
    "ğŸ‰",
    "ğŸŠ",
    "ğŸ¥³",
    "ğŸ‚",
    "ğŸ",
    "ğŸˆ",
    "ğŸª…",
    "ğŸ¥‚",
    "ğŸ¾",
    "ğŸª©",
    "ğŸ†",
    "ğŸ‡",
  ],
  valentine: [
    "â¤ï¸",
    "ğŸ’•",
    "ğŸ’Œ",
    "ğŸ’˜",
    "ğŸŒ¹",
    "ğŸ«",
    "ğŸ’",
    "ğŸ’",
    "ğŸ’‘",
    "ğŸ¥°",
    "ğŸ’",
    "ğŸ•¯ï¸",
    "ğŸ¥‚",
  ],
  birthday: ["ğŸ‚", "ğŸ", "ğŸˆ", "ğŸ‰", "ğŸ¥³", "ğŸ•¯ï¸", "ğŸ§", "ğŸ°", "ğŸŠ", "ğŸª…"],
  christmas: [
    "ğŸ„",
    "ğŸ…",
    "ğŸ¤¶",
    "ğŸ",
    "â­",
    "â„ï¸",
    "â˜ƒï¸",
    "ğŸ¦Œ",
    "ğŸ””",
    "ğŸ•¯ï¸",
    "ğŸ§£",
    "ğŸª",
  ],
  halloween: ["ğŸƒ", "ğŸ‘»", "ğŸ¦‡", "ğŸ•·ï¸", "ğŸ•¸ï¸", "ğŸ’€", "ğŸ§›", "ğŸ§™", "ğŸ¬", "ğŸŒ™"],
  newyear: ["ğŸ†", "ğŸ‡", "ğŸ¥‚", "ğŸ¾", "ğŸ‰", "ğŸ•›", "âœ¨", "ğŸª©"],
  wedding: ["ğŸ’’", "ğŸ‘°", "ğŸ¤µ", "ğŸ’", "ğŸ¥‚", "ğŸ‚", "ğŸ’", "ğŸ’•", "ğŸ¤"],
  gift: ["ğŸ", "ğŸ€", "ğŸ’", "ğŸ‰", "âœ¨", "ğŸ’Œ", "ğŸ›ï¸"],
  party: ["ğŸ‰", "ğŸŠ", "ğŸ¥³", "ğŸª…", "ğŸˆ", "ğŸª©", "ğŸ’ƒ", "ğŸ•º", "ğŸ¾", "ğŸ¶"],

  // -------------------------------------------------------------------------
  // Poetic & abstract concepts
  // -------------------------------------------------------------------------
  reflection: ["ğŸª", "ğŸŒŠ", "ğŸ’­", "ğŸ«§", "ğŸ’«", "ğŸŒ™"],
  time: ["â³", "ğŸ•°ï¸", "â°", "âŒ›", "ğŸ•", "ğŸ•‘", "ğŸ•’", "ğŸ•“", "ğŸ•”", "ğŸ••"],
  dream: ["ğŸ’­", "ğŸŒ™", "âœ¨", "ğŸ’«", "ğŸŒŒ", "ğŸ”®", "ğŸ¦‹", "â˜ï¸", "ğŸ«§", "ğŸ’¤"],
  magic: ["âœ¨", "ğŸª„", "ğŸ”®", "â­", "ğŸ’«", "ğŸŒŸ", "ğŸ§™", "ğŸ¦„", "ğŸŒˆ", "ğŸ©"],
  night: ["ğŸŒ™", "ğŸŒš", "ğŸŒ", "â­", "ğŸŒŒ", "ğŸ¦‰", "ğŸŒƒ", "ğŸŒ†", "ğŸ’¤", "ğŸ¦‡"],
  morning: ["ğŸŒ…", "â˜€ï¸", "ğŸŒ¤ï¸", "â˜•", "ğŸ“", "ğŸŒ»", "ğŸ¥", "ğŸ¦"],
  warmth: ["ğŸ”¥", "â˜•", "ğŸ«–", "ğŸ•¯ï¸", "ğŸ§£", "ğŸ¤—", "ğŸ«¶", "ğŸŒ…", "ğŸ§¡", "ğŸ«‚"],
  cute: [
    "ğŸ¥°",
    "ğŸ¥º",
    "ğŸ±",
    "ğŸ¶",
    "ğŸ°",
    "ğŸ»",
    "ğŸ§¸",
    "ğŸ€",
    "ğŸ’•",
    "ğŸŒ¸",
    "ğŸ¾",
    "ğŸ£",
    "ğŸ¦Š",
  ],
  mystery: ["ğŸ”®", "ğŸŒ™", "ğŸ•µï¸", "ğŸ”", "ğŸ—ï¸", "ğŸŒ«ï¸", "ğŸ‘ï¸", "ğŸƒ", "ğŸ¦‰"],
  comfort: ["ğŸ›‹ï¸", "ğŸ§¸", "ğŸ«‚", "â˜•", "ğŸ§£", "ğŸ•¯ï¸", "ğŸŒ™", "ğŸ¤—", "ğŸ›Œ", "ğŸ«¶"],
  hope: ["ğŸŒ±", "ğŸŒ…", "âœ¨", "ğŸ•Šï¸", "ğŸŒˆ", "ğŸ¤", "ğŸ’«", "ğŸŒ¤ï¸", "ğŸ™"],
  freedom: ["ğŸ•Šï¸", "ğŸ¦…", "ğŸŒŠ", "ğŸ’¨", "ğŸ”ï¸", "ğŸŒˆ", "ğŸ¦‹", "ğŸª"],
  beauty: ["ğŸŒ¸", "ğŸŒ¹", "âœ¨", "ğŸ’", "ğŸ¦‹", "ğŸŒº", "ğŸª·", "ğŸŒ…", "ğŸŒŠ"],
  luck: ["ğŸ€", "ğŸ¤", "ğŸ°", "ğŸŒˆ", "â­", "ğŸ", "ğŸ²", "âœ¨"],
  strength: ["ğŸ’ª", "ğŸ¦", "âš¡", "ğŸ”ï¸", "ğŸŒŠ", "ğŸ”¥", "âœŠ", "ğŸ›¡ï¸"],
  wisdom: ["ğŸ¦‰", "ğŸ“š", "ğŸ§ ", "ğŸ’¡", "ğŸŒ¿", "ğŸ”®", "ğŸ“œ", "ğŸª·"],
  growth: ["ğŸŒ±", "ğŸŒ¿", "ğŸŒ³", "ğŸ“ˆ", "ğŸ¦‹", "ğŸŒ»", "âœ¨", "ğŸŒ¾"],
  memory: ["ğŸ“·", "ğŸ’­", "ğŸ“œ", "ğŸï¸", "ğŸ•°ï¸", "ğŸŒ…", "ğŸ¥¹", "ğŸ“¸"],
  secret: ["ğŸ¤«", "ğŸ”", "ğŸ—ï¸", "ğŸ’Œ", "ğŸ™Š", "ğŸŒ™", "ğŸ«£", "âœ‰ï¸"],
  wonder: ["ğŸ¤©", "âœ¨", "ğŸŒŒ", "ğŸ”­", "ğŸª", "ğŸŒˆ", "ğŸ¦‹", "ğŸ’«", "ğŸŒŠ"],
  silence: ["ğŸ¤«", "ğŸ˜¶", "ğŸŒ™", "ğŸ•Šï¸", "ğŸƒ", "â˜ï¸", "ğŸŒ¿", "ğŸ"],
  gentle: ["ğŸŒ¸", "ğŸ•Šï¸", "â˜ï¸", "ğŸƒ", "ğŸ«§", "ğŸŒ¿", "ğŸ’•", "ğŸ¤²", "ğŸ§¸"],
  wild: ["ğŸ¦", "ğŸº", "ğŸŒŠ", "ğŸ”¥", "âš¡", "ğŸŒªï¸", "ğŸ”ï¸", "ğŸ¦…"],
  sparkle: ["âœ¨", "ğŸ’", "ğŸŒŸ", "â­", "ğŸ’«", "ğŸª©", "ğŸ«§"],
  soft: ["â˜ï¸", "ğŸ§¸", "ğŸŒ¸", "ğŸ«§", "ğŸ¤", "ğŸƒ", "ğŸª¶", "ğŸ‘"],
  bright: ["â˜€ï¸", "ğŸŒŸ", "ğŸ’¡", "âœ¨", "ğŸŒˆ", "ğŸŒ»", "âš¡", "ğŸ’›"],
  dark: ["ğŸŒ‘", "ğŸ–¤", "ğŸŒŒ", "ğŸŒ™", "ğŸ¦‡", "ğŸ•³ï¸", "ğŸŒ‘", "ğŸ’€"],
  tiny: ["ğŸœ", "ğŸ", "ğŸŒ±", "ğŸ£", "ğŸ«§", "ğŸ§¸", "ğŸŒ¸", "ğŸ›"],
  infinite: ["â™¾ï¸", "ğŸŒŒ", "ğŸŒŠ", "â­", "ğŸ’«", "ğŸ”®", "ğŸ•³ï¸"],
  journey: ["ğŸš¶", "ğŸ—ºï¸", "ğŸ§­", "ğŸŒ…", "ğŸ›¤ï¸", "â›µ", "ğŸ”ï¸", "âœˆï¸", "ğŸŒ"],
  treasure: ["ğŸ’", "ğŸ—ï¸", "ğŸ´â€â˜ ï¸", "ğŸ’°", "ğŸ‘‘", "ğŸª™", "ğŸ—ºï¸", "âœ¨"],

  // -------------------------------------------------------------------------
  // Everyday objects & concepts
  // -------------------------------------------------------------------------
  work: ["ğŸ’¼", "ğŸ’»", "ğŸ“Š", "ğŸ“‹", "âœï¸", "ğŸ¢", "ğŸ“§", "â°"],
  study: ["ğŸ“š", "ğŸ“–", "âœï¸", "ğŸ¤“", "ğŸ’¡", "ğŸ“", "ğŸ“", "ğŸ§ "],
  sleep: ["ğŸ˜´", "ğŸ’¤", "ğŸ›Œ", "ğŸŒ™", "ğŸ›ï¸", "ğŸ˜ª", "ğŸ§¸", "â˜ï¸"],
  letter: ["ğŸ’Œ", "âœ‰ï¸", "ğŸ“¬", "ğŸ“®", "ğŸ“", "ğŸ–Šï¸", "ğŸ“œ", "ğŸª¶"],
  money: ["ğŸ’°", "ğŸ’³", "ğŸª™", "ğŸ’µ", "ğŸ’¸", "ğŸ¦", "ğŸ¤‘"],
  phone: ["ğŸ“±", "ğŸ“", "â˜ï¸", "ğŸ’¬", "ğŸ“²"],
  key: ["ğŸ”‘", "ğŸ—ï¸", "ğŸ”", "ğŸ”’", "ğŸ”“"],
  candle: ["ğŸ•¯ï¸", "ğŸ”¥", "âœ¨", "ğŸŒ™", "ğŸ§˜"],
  umbrella: ["â˜”", "ğŸŒ‚", "ğŸŒ§ï¸", "ğŸŒ¦ï¸"],
  glasses: ["ğŸ‘“", "ğŸ•¶ï¸", "ğŸ¤“", "ğŸ¥¸"],
  crown: ["ğŸ‘‘", "ğŸ¤´", "ğŸ‘¸", "ğŸ’", "âœ¨", "ğŸ†"],
  heart: [
    "â¤ï¸",
    "ğŸ§¡",
    "ğŸ’›",
    "ğŸ’š",
    "ğŸ’™",
    "ğŸ’œ",
    "ğŸ¤",
    "ğŸ–¤",
    "ğŸ¤",
    "â¤ï¸â€ğŸ”¥",
    "â¤ï¸â€ğŸ©¹",
    "ğŸ’—",
    "ğŸ’“",
    "ğŸ’•",
    "ğŸ’–",
    "ğŸ’",
    "ğŸ’˜",
    "ğŸ’",
    "â™¥ï¸",
    "ğŸ’Ÿ",
  ],
  weather: [
    "â˜€ï¸",
    "ğŸŒ¤ï¸",
    "â›…",
    "ğŸŒ¥ï¸",
    "â˜ï¸",
    "ğŸŒ¦ï¸",
    "ğŸŒ§ï¸",
    "â›ˆï¸",
    "ğŸŒ©ï¸",
    "ğŸŒ¨ï¸",
    "ğŸŒªï¸",
    "ğŸŒˆ",
    "ğŸ’¨",
  ],
  clean: ["ğŸ§¹", "ğŸ§½", "ğŸ«§", "ğŸ§¼", "âœ¨", "ğŸª£"],
  idea: ["ğŸ’¡", "ğŸ§ ", "âœ¨", "ğŸ¤”", "ğŸ’­", "ğŸ“"],
  fire: ["ğŸ”¥", "ğŸ•¯ï¸", "ğŸ§¯", "â¤ï¸â€ğŸ”¥", "âš¡", "ğŸ’¥"],
  water: ["ğŸ’§", "ğŸŒŠ", "ğŸ’¦", "ğŸš¿", "ğŸŠ", "ğŸ³", "ğŸ«§"],
  earth: ["ğŸŒ", "ğŸŒ", "ğŸŒ", "ğŸŒ±", "ğŸ”ï¸", "ğŸŒ‹", "ğŸª¨"],
  air: ["ğŸ’¨", "ğŸŒ¬ï¸", "ğŸƒ", "â˜ï¸", "ğŸ", "ğŸª", "ğŸ•Šï¸"],
};

// ---------------------------------------------------------------------------
// Group name lookup (group index â†’ human-readable name)
// ---------------------------------------------------------------------------

const GROUP_NAMES: Record<number, string> = {};
for (const g of messages.groups) {
  GROUP_NAMES[g.order] = g.message
    .split(" ")
    .map((w: string) => w.charAt(0).toUpperCase() + w.slice(1))
    .join(" ");
}

// ---------------------------------------------------------------------------
// Build the reverse lookup for custom associations: emoji char â†’ extra keywords
// ---------------------------------------------------------------------------

const customKeywordsByEmoji: Record<string, Set<string>> = {};
for (const [concept, emojis] of Object.entries(CUSTOM_ASSOCIATIONS)) {
  for (const char of emojis) {
    if (!customKeywordsByEmoji[char]) {
      customKeywordsByEmoji[char] = new Set();
    }
    customKeywordsByEmoji[char].add(concept);
  }
}

// ---------------------------------------------------------------------------
// Process emojibase data into our flat, searchable structure
// ---------------------------------------------------------------------------

function buildDataset(): EmojiEntry[] {
  const entries: EmojiEntry[] = [];

  for (const raw of rawData) {
    // Skip regional indicators (no group) and component emojis (skin tones, hair)
    if (raw.group === undefined || raw.group === 2) continue;

    const keywords = new Set<string>();

    // Add official tags
    if (raw.tags) {
      for (const tag of raw.tags) {
        keywords.add(tag.toLowerCase());
      }
    }

    // Add words from the label
    for (const word of raw.label.toLowerCase().split(/[\s-]+/)) {
      if (word.length > 1) keywords.add(word);
    }

    // Add CLDR shortcodes
    const sc = (cldrShortcodes as Record<string, string | string[]>)[
      raw.hexcode
    ];
    if (sc) {
      const codes = Array.isArray(sc) ? sc : [sc];
      for (const code of codes) {
        for (const word of code.split(/[_-]+/)) {
          if (word.length > 1) keywords.add(word.toLowerCase());
        }
      }
    }

    // Add custom associations
    const custom = customKeywordsByEmoji[raw.emoji];
    if (custom) {
      for (const kw of custom) {
        keywords.add(kw);
      }
    }

    entries.push({
      emoji: raw.emoji,
      name: raw.label,
      keywords: Array.from(keywords),
      group: GROUP_NAMES[raw.group] || "Other",
    });
  }

  // Sort by emojibase order for consistent display
  return entries;
}

export const emojiData: EmojiEntry[] = buildDataset();

// ---------------------------------------------------------------------------
// Search
// ---------------------------------------------------------------------------

export function searchEmoji(query: string, limit = 50): EmojiEntry[] {
  if (!query.trim()) return emojiData.slice(0, limit);

  const terms = query.toLowerCase().trim().split(/\s+/);
  const scored: { entry: EmojiEntry; score: number }[] = [];

  for (const entry of emojiData) {
    let totalScore = 0;
    let allTermsMatch = true;

    for (const term of terms) {
      let bestTermScore = 0;

      // Exact name match â€” highest score
      if (entry.name.toLowerCase() === term) {
        bestTermScore = 10;
      }
      // Name contains term
      else if (entry.name.toLowerCase().includes(term)) {
        bestTermScore = 5;
      }
      // Keyword exact match
      else if (entry.keywords.some((kw) => kw === term)) {
        bestTermScore = 4;
      }
      // Keyword starts with term
      else if (entry.keywords.some((kw) => kw.startsWith(term))) {
        bestTermScore = 3;
      }
      // Keyword contains term
      else if (entry.keywords.some((kw) => kw.includes(term))) {
        bestTermScore = 2;
      }

      if (bestTermScore === 0) {
        allTermsMatch = false;
        break;
      }
      totalScore += bestTermScore;
    }

    if (allTermsMatch && totalScore > 0) {
      scored.push({ entry, score: totalScore });
    }
  }

  scored.sort((a, b) => b.score - a.score);
  return scored.slice(0, limit).map((s) => s.entry);
}
